import { configureStore } from "@reduxjs/toolkit";
import counterReducer from "../features/counter/counterSlice";
import usersReducer from "../features/users/usersSlice";
import productsReducer from "../features/products/productsSlice";
import cartReducer from "../features/cart/cartSlice";
import apodReducer from "../features/apod/apodSlice";
import { weatherApi } from "../features/weather/weatherAPI";
//‚Üí –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º configureStore ‚Äî –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞—Ç—å store.
export const store = configureStore({
  reducer: {
    counter: counterReducer,
    users: usersReducer,
    products: productsReducer,
    cart: cartReducer,
    [weatherApi.reducerPath]: weatherApi.reducer,
    //weatherApi: weatherApi.reducer,
    apod: apodReducer,
  },
  middleware: (getDefault) => getDefault().concat(weatherApi.middleware),
  // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º middleware.
  // –ë–µ—Ä—ë–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ middleware Redux Toolkit –∏ –¥–æ–±–∞–≤–ª—è–µ–º RTK Query middleware.
  // –û–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ—Ñ–µ—Ç—á–∏–Ω–≥

  // (getDefault) =>
  // Redux Toolkit —Å–∞–º –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö middleware:
  // –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –∏ —Ç.–¥.
  // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –º–∞—Å—Å–∏–≤ —ç—Ç–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö middleware —á–µ—Ä–µ–∑ getDefault().
  // ¬´–í–æ–∑—å–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Redux
  //  –∏ –¥–æ–±–∞–≤—å –∫ –Ω–∏–º RTK Query –º–µ—Ö–∞–Ω–∏–∑–º –∑–∞–ø—Ä–æ—Å–æ–≤.¬ª
  // –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ:
  // defaultMiddleware ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω
  // weatherApi.middleware ‚Äî —ç—Ç–æ –∫–∞–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã –∫ –Ω–µ–º—É –ø—Ä–∏–∫—Ä—É—á–∏–≤–∞–µ–º
});

// –¢–∏–ø—ã –¥–ª—è useSelector –∏ useDispatch

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
// ‚Üí –°–æ–∑–¥–∞—ë–º —Ç–∏–ø—ã –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –¥–∏—Å–ø–∞—Ç—á–µ—Ä–∞, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ TS-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.



// –ß—Ç–æ —Ç–∞–∫–æ–µ middleware 

// –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤ Redux —É –Ω–∞—Å –µ—Å—Ç—å —Ü–µ–ø–æ—á–∫–∞, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–∞–∂–¥—ã–π dispatch.

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí dispatch(action) ‚Üí —Ä–µ–¥—å—é—Å–µ—Ä


// Middleware ‚Äî —ç—Ç–æ ¬´–ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫¬ª, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–∏—Ç –º–µ–∂–¥—É dispatch –∏ —Ä–µ–¥—å—é—Å–µ—Ä–æ–º.
// –û–Ω –ø–æ–ª—É—á–∞–µ—Ç –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (action), –º–æ–∂–µ—Ç:

// –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –Ω–µ–≥–æ,

// –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ,

// –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å,

// –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ,

// –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–∞–ª—å—à–µ.

// –ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:

// üîµ **Middleware ‚Äî —ç—Ç–æ –∫–∞–∫ –æ—Ö—Ä–∞–Ω–Ω–∏–∫ –Ω–∞ –ø—Ä–æ—Ö–æ–¥–Ω–æ–π:

// –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –æ–Ω–æ –ø–æ–ø–∞–¥—ë—Ç –≤ —Ä–µ–¥—å—é—Å–µ—Ä.**

// –ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–æ–≥–∏–∏:

// –¢—ã –∑–∞—Ö–æ–¥–∏—à—å –≤ –∑–¥–∞–Ω–∏–µ (dispatch)

// –û—Ö—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–±—è (middleware)

// –¢—ã –∏–¥—ë—à—å –¥–∞–ª—å—à–µ –≤ –∫–∞–±–∏–Ω–µ—Ç (—Ä–µ–¥—å—é—Å–µ—Ä)

// –ë–µ–∑ middleware ‚Äî —Ç—ã –ø—Ä–æ—Ö–æ–¥–∏—à—å —Å—Ä–∞–∑—É.

// üü© 2. –ó–∞—á–µ–º RTK Query –Ω—É–∂–µ–Ω middleware?

// RTK Query –¥–µ–ª–∞–µ—Ç –º–Ω–æ–≥–æ –º–∞–≥–∏–∏:

// –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫—ç—à

// —Å–ª–µ–¥–∏—Ç, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–ø—Ä–æ—Å

// –æ—Ç–º–µ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

// –∏—â–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –∏—Ö

// –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ refetch

// –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã–µ

// –ß—Ç–æ–±—ã —ç—Ç–∞ –º–∞–≥–∏—è —Ä–∞–±–æ—Ç–∞–ª–∞, RTK Query –Ω—É–∂–µ–Ω middleware.

// –û–Ω –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å actions —Ç–∏–ø–∞:

// getWeather/started

// getWeather/success

// getWeather/error

// getWeather/refetch

// –∏ —Ç. –¥.

// –ü–æ—ç—Ç–æ–º—É –º—ã –æ–±—è–∑–∞–Ω—ã –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ store.

// üü¶ 3. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ store
// middleware: (getDefault) =>
//   getDefault().concat(weatherApi.middleware)


// –†–∞–∑–±–æ—Ä –ø–æ—Å—Ç—Ä–æ—á–Ω–æ:

// ‚úî middleware:

// –ú—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º middleware –≤ Redux store.

// ‚úî (getDefault) =>

// Redux Toolkit —Å–∞–º –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö middleware:
// –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –∏ —Ç.–¥.

// –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –º–∞—Å—Å–∏–≤ —ç—Ç–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö middleware —á–µ—Ä–µ–∑ getDefault().

// ‚úî getDefault()

// –≠—Ç–æ –º–∞—Å—Å–∏–≤ –æ–±—ã—á–Ω—ã—Ö middleware Redux Toolkit.
// –ú—ã –∏—Ö –ù–ï —Ö–æ—Ç–∏–º —É–¥–∞–ª—è—Ç—å ‚Äî –æ–Ω–∏ –≤–∞–∂–Ω—ã–µ.

// –ü—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫:

// [reduxThunk, serializableCheck, immutableCheck]

// ‚úî .concat(weatherApi.middleware)

// concat ‚Äî —ç—Ç–æ –∫–∞–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω–µ—Ü –º–∞—Å—Å–∏–≤–∞.

// –ú—ã –±–µ—Ä—ë–º –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ middleware –∏ –¥–æ–±–∞–≤–ª—è–µ–º RTK Query middleware.

// –¢–æ –µ—Å—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

// [
//   ...defaultMiddleware,
//   weatherApi.middleware
// ]

// üüß ‚úî –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ 
// üëâ –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç:

// ü•§ ¬´–í–æ–∑—å–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Redux –∏ –¥–æ–±–∞–≤—å –∫ –Ω–∏–º RTK Query –º–µ—Ö–∞–Ω–∏–∑–º –∑–∞–ø—Ä–æ—Å–æ–≤.¬ª

// –ò–ª–∏ —Å–æ–≤—Å–µ–º –ø—Ä–æ—Å—Ç–æ:

// üê± ¬´–ú—ã –ø–æ–¥–∫–ª—é—á–∞–µ–º –≤ Redux —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å–∞–º–∏ RTK Query.¬ª

// üü¶ –ü–æ–ª–Ω–µ–π—à–∞—è –∞–Ω–∞–ª–æ–≥–∏—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:

// –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ:

// defaultMiddleware ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω

// weatherApi.middleware ‚Äî —ç—Ç–æ –∫–∞–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã –∫ –Ω–µ–º—É –ø—Ä–∏–∫—Ä—É—á–∏–≤–∞–µ–º

// –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ ‚Äî —ç—Ç–æ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:

// —Ç–µ–ª–µ—Ñ–æ–Ω + –∫–∞–º–µ—Ä–∞


// –¢–æ –µ—Å—Ç—å Redux –Ω–∞—á–∏–Ω–∞–µ—Ç —É–º–µ—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å API-–∑–∞–ø—Ä–æ—Å–∞–º–∏ RTK Query.